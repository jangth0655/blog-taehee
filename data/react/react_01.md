---
title: Virtual DOM · Reconciliation
category: react
createdAt: 2022-8-18
updatedAt: 2022/12/12
---

## Virtual DOM

DOM을 조작했을 경우 **렌더트리를 재생성하고 그럼 모든 요소들의 스타일이 다시 계산**된다. 즉 레이아웃을 만들고 페인팅하고 이러한 과정들이 반복된다. SPA에서는 DOM조작이 많이 발생하는데 그럼 브라우저 렌더링 과정이 많아지고 그만큼 연산을 많이 해야한다는 것이다. 따라서 전체적인 프로세스를 비효율적으로 만들어 버린다.
이에따라 등장한 개념이 **가상DOM**이다.

## Reconciliation

메모리상에 보관되어 있는 실제 DOM의 복사본 객체로 2개의 가상돔을 가지고 있다.

- 렌더링 이전 화면 구조를 나타내는 가상돔
- 랜더링 이후에 보이게 될 화면 구조를 나타내는 가상돔

리액트는 State가 변경될 때마다 리렌더링이 발생하는데 이 시점에 이전 가상돔과 이후 가상돔을 **비교**하여 최종적인 변화가 있을 때 **모든 변화를 묶어서 딱 한번** 실제 DOM을 업데이트한다. (Diffing)  
이러한 과정을 **Reconciliation**이라고 한다.

✔️ 사실 가상DOM 없이 DOM의 변화가 있을 경우 수동적으로 한번에 DOM을 업데이트 할 수 있다. 하지만 **가상DOM은 이러한 과정을 자동화하고 추상화한다는 점이 포인트**이다. 즉 여러 번잡한 작업, 앞서 말한바와 같이 수동적으로 각 컴포넌트가 어떻게 조작되고 조작된 정보를 공유하여 업데이트 하는 등 이러한 각 변화들의 동기화 작업을 거치지 않으면서 모든 작업을 하나로 묶어 업데이트 시켜준다.
